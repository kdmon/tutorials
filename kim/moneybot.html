<!DOCTYPE html>
<html>

  <head>
    <title>moneyBot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <script>
      var currency = "&#163;";
      var transactions = [{
        "date": "13/07/14",
        "category": "Food",
        "amount": 10.00,
        "account": "main"
      }, {
        "date": "14/07/14",
        "category": "Wages",
        "amount": 50.50,
        "account": "main",
        "income": true
      }, {
        "date": "13/07/14",
        "category": "Council Tax",
        "amount": 10.00,
        "account": "billing"
      }, {
        "date": "13/07/14",
        "category": "Wages",
        "amount": 10.00,
        "account": "wallet",
        "income": true
      }, {
        "date": "13/07/14",
        "category": "Food",
        "amount": 10.00,
        "account": "wallet"
      }];
      var accounts = [{
        "name": "Main Account",
        id: "main"
      }, {
        "name": "Billing Account",
        id: "billing"
      }, {
        "name": "Wallet",
        id: "wallet"
      }];

      function calculateBalance(account) {
        var balance = 0;
        switch (account) {
          case "main":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "main") {
                if (transactions[i].income) balance += transactions[i].amount;
                else balance -= transactions[i].amount;
              }
            }
            return balance;
            break;
          case "billing":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "billing") {
                if (transactions[i].income) balance += transactions[i].amount;
                else balance -= transactions[i].amount;
              }
            }
            return balance;
            break;
          case "wallet":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "wallet") {
                if (transactions[i].income) balance += transactions[i].amount;
                else balance -= transactions[i].amount;
              }
            }
            return balance;
            break;
        }
      }

      function listTransactionMain(id, account, income) {
     
        $("#mainTransactions").append("<li>" + transactions[id].date + " " + transactions[id].category + " " + currency + transactions[id].amount + "</li>" );
        $("#mainTransactions").listview("refresh");
      
      }
      
      function listTransactionBilling(id, account, income) {
     
        $("#billTransactions").append("<li>" + transactions[id].date + " " + transactions[id].category + " " + currency + transactions[id].amount + "</li>" );
        $("#billTransactions").listview("refresh");
       
      }
      
      function listTransactionWallet(id, account, income) {
     
        $("#walletTransactions").append("<li>" + transactions[id].date + " " + transactions[id].category + " " + currency + transactions[id].amount + "</li>" );
        $("#walletTransactions").listview("refresh");
       
      }
      
      
      function displayTransactions(account) {
        switch (account) {
          case "main":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "main") {
                listTransactionMain(i, "main")
              }
            }
            break;
          case "billing":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "billing") {
                listTransactionBilling(i, "billing")
              }
            }
            break;
          case "wallet":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "wallet") {
                listTransactionWallet(i, "wallet")
              }
            }
            break;
        }
      }
       // alert('test' + " " + calculateBalance('wallet'));
    </script>
  </head>

  <body>
    <div data-role="page" id="main">
      <div data-role="header">
        <h1>MoneyBot</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="http://wiki.it4se.com/images/4/4a/Moneybot.jpg"> 
        <a href="#myAccs" data-role="button">My Accounts</a>
        <a href="#newTrans" data-role="button">New Transactions</a>
        <a href="#weekView" data-role="button">Week View</a>
        <a href="#help" data-role="button" data-theme="b" data-mini="true">Help</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="mainAcc">
      <div data-role="header">
        <h1>Main Account</h1>
      </div>
      <div data-role="main" class="ui-content">
        <ul data-role="listview" id="mainTransactions"></ul> 
        <br>
        <b><p id="mainClosingBal"></p></b>
        <a href="#myAccs" data-role="button">My Accounts</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="billAcc">
      <div data-role="header">
        <h1>Billing Account</h1>
      </div>
      <div data-role="main" class="ui-content">
        <ul data-role="listview" id="billTransactions"></ul> 
        <br>
        <b><p id="billClosingBal"></p></b>
        <a href="#myAccs" data-role="button">My Accounts</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="wallet">
      <div data-role="header">
        <h1>Wallet</h1>
      </div>
      <div data-role="main" class="ui-content">
       <ul data-role="listview" id="walletTransactions"></ul> 
        <br>
        <b><p id="walletClosingBal"></p></b>
        <a href="#myAccs" data-role="button">My Accounts</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="help">
      <div data-role="header">
        <h1>help</h1>
      </div>
      <div data-role="main" class="ui-content">
        <p>This page will explain the aims and use of the app</p> <a href="#main" data-role="button">Main</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="weekView">
      <div data-role="header">
        <h1>Week View</h1>
      </div>
      <div data-role="main" class="ui-content">
        <p>This page will display balance for each day of the week, highlighing in red any negative balances</p> <a href="#myAccs" data-role="button">My Accounts</a>
        <a href="#main" data-role="button">Main</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="myAccs">
      <div data-role="header">
        <h1>Accounts List</h1>
      </div>
      <div data-role="content">
        <ul data-role="listview">
          <li><a href="#mainAcc">Main Account</a>
          </li>
          <li><a href="#billAcc">Billing Account</a>
          </li>
          <li><a href="#wallet">Wallet</a>
          </li>
        <br>
        </ul> <a href="#main" data-role="button">Main Page</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
     <div data-role="page" id="newTrans">
      <div data-role="header">
        <h1>New Transactions</h1>
      </div>
      <div data-role="content">
        <form id="newTransForm" method="post" action="">
          <div class="ui-field-contain">
          <label for="date"><b><center>Date</center></b></label>
          <input type="text" data-role="date" id="dateInput" placeholder="dd/mm/yy make this datepicker"><br>
          <label for="select-choice-1" class="select" ><b><center>Select Account</center></b></label>
            <select name="select-choice-1" id="accSelet" data-mini="true">
            <option value="mainSelect">Main Account</option>
            <option value="billSelect">Billing Account</option>
            <option value="walletSelect">Wallet</option>
            </select><br>
          <label for="amount"><b><center>Amount</center></b></label>
          <input type="text" id="amountInput" placeholder="Enter amount.."><br>
          <input type="submit" value="Submit" data-mini="true">
        </div>
        </form>
        <a href="#main" data-role="button" data-mini="true">Main Page</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <script>
      $("#mainAcc").on("pageinit", function(event) {
        displayTransactions("main")
        $("#mainClosingBal").text("Closing Balance " + "£" + calculateBalance("main"))
      })
      
      $("#billAcc").on("pageinit", function(event) {
        displayTransactions("billing")
        $("#billClosingBal").text("Closing Balance " + "£" + calculateBalance("billing"))
      })
      
      $("#wallet").on("pageinit", function(event) {
        displayTransactions("wallet")
        $("#walletClosingBal").text("Closing Balance " + "£" + calculateBalance("wallet"))
      })
    </script>
  </body>

</html>