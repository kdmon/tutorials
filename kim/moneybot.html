<!DOCTYPE html>
<html>

  <head>
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <script>
      var currency = "GBP";
      var transactions = [{
        "date": "13/07/14",
        "category": "Food",
        "amount": 10,
        "account": "main"
      }, {
        "date": "14/07/14",
        "category": "Wages",
        "amount": 50,
        "account": "main",
        "income": true
      }, {
        "date": "13/07/14",
        "category": "Council Tax",
        "amount": 10,
        "account": "billing"
      }, {
        "date": "13/07/14",
        "category": "Wages",
        "amount": 10,
        "account": "wallet",
        "income": true
      }, {
        "date": "13/07/14",
        "category": "Food",
        "amount": 10,
        "account": "wallet"
      }];
      var accounts = [{
        "name": "Main Account",
        id: "main"
      }, {
        "name": "Billing Account",
        id: "billing"
      }, {
        "name": "Wallet",
        id: "wallet"
      }];

      function calculateBalance(account) {
        var balance = 0;
        switch (account) {
          case "main":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "main") {
                if (transactions[i].income) balance += transactions[i].amount;
                else balance -= transactions[i].amount;
              }
            }
            return balance;
            break;
          case "billing":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "billing") {
                if (transactions[i].income) balance += transactions[i].amount;
                else balance -= transactions[i].amount;
              }
            }
            return balance;
            break;
          case "wallet":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "wallet") {
                if (transactions[i].income) balance += transactions[i].amount;
                else balance -= transactions[i].amount;
              }
            }
            return balance;
            break;
        }
      }

      function listTransactionMain(id, account, income) {
     
        $("#mainTransactions").append("<li>" + transactions[id].date + " " + transactions[id].category + " " + currency + " " + transactions[id].amount + "</li>" );
        $("#mainTransactions").listview("refresh");
      
      }
      
      function listTransactionBilling(id, account, income) {
     
        $("#billTransactions").append("<li>" + transactions[id].date + " " + transactions[id].category + " " + currency + " " + transactions[id].amount + "</li>" );
        $("#billTransactions").listview("refresh");
       
      }
      
      function listTransactionWallet(id, account, income) {
     
        $("#walletTransactions").append("<li>" + transactions[id].date + " " + transactions[id].category + " " + currency + " " + transactions[id].amount + "</li>" );
        $("#walletTransactions").listview("refresh");
       
      }
      
      
      function displayTransactions(account) {
        switch (account) {
          case "main":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "main") {
                listTransactionMain(i, "main")
              }
            }
            break;
          case "billing":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "billing") {
                listTransactionBilling(i, "billing")
              }
            }
            break;
          case "wallet":
            for (i = 0; i < transactions.length; i++) {
              if (transactions[i].account == "wallet") {
                listTransactionWallet(i, "wallet")
              }
            }
            break;
        }
      }
       // alert('test' + " " + calculateBalance('wallet'));
    </script>
  </head>

  <body>
    <div data-role="page" id="main">
      <div data-role="header">
        <h1>MoneyBot</h1>
      </div>
      <div data-role="main" class="ui-content">
        <img src="http://wiki.it4se.com/images/4/4a/Moneybot.jpg"> <a href="#myAccs" data-role="button">My Accounts</a>
        <a href="#weekView" data-role="button">Week View</a>
        <a href="#help" data-role="button">Help</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="mainAcc">
      <div data-role="header">
        <h1>Main Account</h1>
      </div>
      <div data-role="main" class="ui-content">
        <ul data-role="listview" id="mainTransactions"></ul> 
        <br>
        <p id="mainClosingBal"></p>
        <a href="#myAccs" data-role="button">My Accounts</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="billAcc">
      <div data-role="header">
        <h1>Billing Account</h1>
      </div>
      <div data-role="main" class="ui-content">
        <ul data-role="listview" id="billTransactions"></ul> 
        <br>
        <p id="billClosingBal"></p>
        <a href="#myAccs" data-role="button">My Accounts</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="wallet">
      <div data-role="header">
        <h1>Wallet</h1>
      </div>
      <div data-role="main" class="ui-content">
       <ul data-role="listview" id="walletTransactions"></ul> 
        <br>
        <p id="walletClosingBal"></p>
        <a href="#myAccs" data-role="button">My Accounts</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="help">
      <div data-role="header">
        <h1>help</h1>
      </div>
      <div data-role="main" class="ui-content">
        <p>This page will explain the aims and use of the app</p> <a href="#main" data-role="button">Main</a> 
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="weekView">
      <div data-role="header">
        <h1>Week View</h1>
      </div>
      <div data-role="main" class="ui-content">
        <p>This page will display balance for each day of the week, highlighing in red any negative balances</p> <a href="#myAccs" data-role="button">My Accounts</a>
        <a href="#main" data-role="button">Main</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <div data-role="page" id="myAccs">
      <div data-role="header">
        <h1>Accounts List</h1>
      </div>
      <div data-role="content">
        <ul data-role="listview">
          <li><a href="#mainAcc">Main Account</a>
          </li>
          <li><a href="#billAcc">Billing Account</a>
          </li>
          <li><a href="#wallet">Wallet</a>
          </li>
        </ul> <a href="#main" data-role="button">Main Page</a>
      </div>
      <div data-role="footer">
        <h1>&copy;Kimberley Shepherd 2014</h1>
      </div>
    </div>
    <script>
      $("#mainAcc").on("pageinit", function(event) {
        displayTransactions("main")
        $("#mainClosingBal").text("Closing Balance " + currency + " " + calculateBalance("main"))
      })
      
      $("#billAcc").on("pageinit", function(event) {
        displayTransactions("billing")
        $("#billClosingBal").text("Closing Balance " + currency + " " + calculateBalance("billing"))
      })
      
      $("#wallet").on("pageinit", function(event) {
        displayTransactions("wallet")
        $("#walletClosingBal").text("Closing Balance " + currency + " " + calculateBalance("wallet"))
      })
    </script>
  </body>

</html>